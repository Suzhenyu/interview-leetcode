### TCP 三次握手、四次挥手（重点）

三次握手：1. 客户端主动，服务端确认客户端发送，服务端接收正常 2 服务端发包，客户端确认全部正常；3. 客户端发包，服务端确认客户端收包，服务端发包正常

四次挥手：某一端发出请求，a1发出终止信号，a2返回确认收到，a2发送终止信号，a1发送确认收到

### 为什么要有三次握手、四次挥手, 为什么一定要是三次和四次

因为要保证通信的可靠性，握手是三次，保证两端都确认自己和对方的收发包能力，挥手是确认两端都发包结束，可以断开

### TCP的优点和缺点

优点：可靠、稳定性

缺点：

* 占用系统资源高：建立连接需要耗时, 传递数据时，确认、重传、拥塞
* 易被攻击 ：因为有确认机制，三次握手等机制，容易被人利用，实现DOS 、DDOS攻击

### 挥手的过程中有timeout的状态，是什么情况

* 超时重传：分为仅重传timeout的包或重传timeout后所有的数据，但都要等待timeout
* 快速重传：数据驱动，发送端每次发包会收到ack 包，如果数据包没有连续到达，就ack最后那个可能被丢了的包，如果发送端连续收到3次相同的ack就重传。缺点是不知道要重传哪些包
* SACK方法：TCP头里加一个SACK的东西，可以精确的知道哪些包到了哪些没到，但比较耗费资源，因为可能要遍历已经传过的资源
* Duplicate-SACK方法：

### http 中的 4层与7层分别代表什么，中间那三层是为了满足什么样的需求呢？

提问：小雨

答者：海翔

一个ISO7层模型，一个是web四层模型，不是一个东西

7层模型分物理层，数据链路层，网络层，传输层，会话层，表示层，应用层

4层模型是TCP/IP协议的定义，数据链路层对应7层模型的物理层+数据链路层，网络层对应7层模型的网络层，传输层对应7层模型的传输层，应用层对应7层模型的会话层+表示层+应用层